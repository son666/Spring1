USE `springlesson03`;

DROP TABLE IF EXISTS buyers;
CREATE TABLE buyers (
	id INT(11) NOT NULL AUTO_INCREMENT,
    name VARCHAR(100) DEFAULT NULL,
    PRIMARY KEY(id)
) ENGINE=InnoDB CHARSET=utf8;

DROP TABLE IF EXISTS products;
CREATE TABLE products (
	id INT(11) NOT NULL AUTO_INCREMENT,
    title VARCHAR(100) DEFAULT NULL,
    cost DOUBLE DEFAULT NULL,
    PRIMARY KEY(id)
) ENGINE=InnoDB CHARSET=utf8;

CREATE TABLE buyers_products (
	product_id int(11) NOT NULL,
    buyer_id int(11) NOT NULL,
	PRIMARY KEY(product_id, buyer_id),

	CONSTRAINT FK_PRODUCT FOREIGN KEY (product_id)
    REFERENCES products (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION,

	CONSTRAINT FK_BUYER FOREIGN KEY (buyer_id)
    REFERENCES buyers (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION

) ENGINE=InnoDB CHARSET=utf8;


DROP TABLE IF EXISTS faculties;
CREATE TABLE faculties (
	id INT(11) NOT NULL AUTO_INCREMENT,
    name VARCHAR(100) DEFAULT NULL,
    PRIMARY KEY(id)
) ENGINE=InnoDB CHARSET=utf8;

DROP TABLE IF EXISTS students;
CREATE TABLE students (
	id INT(11) NOT NULL AUTO_INCREMENT,
    name VARCHAR(100) DEFAULT NULL,
    fac_id int(11) DEFAULT NULL,
    PRIMARY KEY(id),
    CONSTRAINT FK_FACULTIES_ID FOREIGN KEY (fac_id)
    REFERENCES faculties (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB CHARSET=utf8;


